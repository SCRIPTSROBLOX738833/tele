import telebot

# Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¨ÙˆØª
TOKEN = "7939391363:AAHKUfinnRpDTDw84p4XkKGNWTyFRTTQQdo"
bot = telebot.TeleBot(TOKEN)

# Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø­Ø¯Ø« Ø§Ù†Ø¶Ù…Ø§Ù… Ø¹Ø¶Ùˆ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
@bot.message_handler(content_types=['new_chat_members'])
def welcome_new_member(message):
    for new_member in message.new_chat_members:
        try:
            # Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ
            first_name = new_member.first_name or "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"
            last_name = new_member.last_name or ""
            full_name = f"{first_name} {last_name}".strip()

            # ID Ø§Ù„Ø´Ø®Øµ
            user_id = new_member.id

            # Ø§Ù„ÙˆØµÙ Ø§Ù„Ø´Ø®ØµÙŠ - ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ø§ ÙŠÙˆÙØ± Ø§Ù„ÙˆØµÙ Ø¹Ø¨Ø± Ø§Ù„Ù€ API
            bio = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ."

            # Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            msg = f"ğŸ‘‹ **Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©!**\n\n"
            msg += f"ğŸ“› Ø§Ù„Ø§Ø³Ù…: {full_name}\n"
            msg += f"ğŸ†” Ø§Ù„Ø§ÙŠØ¯ÙŠ: `{user_id}`\n"
            msg += f"âœï¸ Ø§Ù„ÙˆØµÙ: {bio}\n"

            # Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
            user_profile_photos = bot.get_user_profile_photos(new_member.id)
            if user_profile_photos.total_count > 0:
                # Ø¬Ù„Ø¨ Ø£ÙˆÙ„ ØµÙˆØ±Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§
                file_id = user_profile_photos.photos[0][0].file_id
                bot.send_photo(message.chat.id, file_id, caption=msg, parse_mode="Markdown")
            else:
                # Ù„Ùˆ Ù…ÙÙŠØ´ ØµÙˆØ±Ø©ØŒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø·
                bot.send_message(message.chat.id, msg, parse_mode="Markdown")
        except Exception as e:
            bot.send_message(message.chat.id, f"âŒ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {e}")

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
print("Ø§Ù„Ø¨ÙˆØª Ø´ØºØ§Ù„...")
bot.polling()
